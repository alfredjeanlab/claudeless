# Capture teammate navigation in an agent team.
# Uses Shift+Down to select teammate, Enter to view, Escape to return.
# Args: --model haiku --teammate-mode in-process --dangerously-skip-permissions
# Env: CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
# Timeout: 300

wait "for shortcuts" 10s

# Ask Claude to create a team
send "Create an agent team with 2 teammates to brainstorm names for a CLI tool. One teammate for short names, one for descriptive names." 100 <Enter>

# Wait for team to be set up
wait "teammate" 120s
wait 10s
snapshot "agent_team_lead_view"

# Navigate to first teammate with Shift+Down
send <S-Down>
wait 2s
snapshot "agent_team_teammate_selected"

# Enter teammate session
send <Enter>
wait 3s
snapshot "agent_team_teammate_session"

# Return to lead with Escape
send <Esc>
wait 2s
snapshot "agent_team_returned_to_lead"

send <C-u> 100 "/exit" 100 <Enter>
wait 500
kill TERM
