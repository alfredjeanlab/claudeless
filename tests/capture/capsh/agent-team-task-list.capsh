# Capture teammate panel toggle (ctrl+t) in an agent team.
# Shows the expandable teammate list with status and token counts.
# Args: --model haiku --teammate-mode in-process --dangerously-skip-permissions
# Env: CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
# Timeout: 300

# Accept the bypass confirmation dialog (select "Yes, I accept")
wait "No, exit" 10s
send <Down>
wait 100
send <Enter>

wait "bypass permissions on" 10s

# Ask Claude to create a team
send "Create an agent team with 2 members to research Rust error handling vs async patterns." 200 <Enter>

# Wait for team to spawn
wait "agents launched" 120s
wait 10s

# Toggle teammate panel with Ctrl+T â€” shows team-lead, @teammate entries
send <C-t>
wait 3s
snapshot "agent_team_panel_shown"

# Toggle teammate panel off
send <C-t>
wait 1s
snapshot "agent_team_panel_hidden"

send <C-u> 200 "/exit" 200 <Enter>
wait 500
kill TERM
